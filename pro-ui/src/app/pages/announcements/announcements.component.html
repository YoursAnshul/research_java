<div class="announcements-header">
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <mask
      id="mask0_591_17735"
      style="mask-type: alpha"
      maskUnits="userSpaceOnUse"
      x="0"
      y="0"
      width="24"
      height="24"
    >
      <rect width="24" height="24" fill="#D9D9D9" />
    </mask>
    <g mask="url(#mask0_591_17735)">
      <path
        d="M18 13V11H22V13H18ZM19.2 20L16 17.6L17.2 16L20.4 18.4L19.2 20ZM17.2 8L16 6.4L19.2 4L20.4 5.6L17.2 8ZM5 19V15H4C3.45 15 2.97917 14.8042 2.5875 14.4125C2.19583 14.0208 2 13.55 2 13V11C2 10.45 2.19583 9.97917 2.5875 9.5875C2.97917 9.19583 3.45 9 4 9H8L13 6V18L8 15H7V19H5ZM14 15.35V8.65C14.45 9.05 14.8125 9.5375 15.0875 10.1125C15.3625 10.6875 15.5 11.3167 15.5 12C15.5 12.6833 15.3625 13.3125 15.0875 13.8875C14.8125 14.4625 14.45 14.95 14 15.35Z"
        fill="#00569B"
      />
    </g>
  </svg>
  <h3>Announcements</h3>
  <a
    *ngIf="!userObj.interviewer"
    routerLink="/announcement-management"
    [queryParams]="{ path: 'home' }"
    class="manage-link"
    >Manage Announcements</a
  >
</div>
<div class="announcements-panel">
  <ng-container
    *ngIf="announcementsList && announcementsList.length > 0; else noData"
  >
    <div *ngFor="let announcement of announcementsList" class="announcement">
      <h4>{{ announcement.icon }}{{ announcement.title }}</h4>
      <div class="announcement-text">
        <p>{{ getTruncatedText(announcement) }}</p>
        <button
          *ngIf="announcement.bodyText.length > maxLength"
          (click)="toggleText(announcement)"
          class="show-more-btn"
        >
          {{ announcement.isFullText ? "Show Less" : "Show More" }}
        </button>
      </div>

      <div class="meta">
        <div>
          <small
            >Posted {{ announcement.startDate | date : "MM/dd/yyyy" }} by
          </small>
          <small *ngIf="announcement.isAuthor">{{
            announcement.authorName
          }}</small>
        </div>
        <div class="tags">
          <span
            *ngFor="let project of announcement.projectObject"
            class="tag"
            [ngStyle]="{ '--tag-color': project.projectColor }"
          >
            {{ project.projectName }}
          </span>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #noData>
    <div class="no-data">
      <p>No announcements to display.</p>
    </div>
  </ng-template>
</div>
